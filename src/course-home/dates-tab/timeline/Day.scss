$dot-radius: .32rem;
$dot-size: $dot-radius * 2.1;
$offset: $dot-radius * 1.6;
$line-w: 2px;

:root {
  --tl-track: var(--pgn-color-light-400, #e6eaef);
  --tl-track-muted: var(--pgn-color-light-300, #eef2f6);
  --tl-progress: var(--pgn-color-primary-500, #0f5b8d);
  --tl-dot: var(--pgn-color-gray-900, #0f172a);
  --tl-today: #ffdb87;
  --tl-glow: rgba(15, 91, 141, .25);
}

@media (prefers-color-scheme: dark) {
  :root {
    --tl-track: #2a3641;
    --tl-track-muted: #202a33;
    --tl-progress: #67b3ff;
    --tl-dot: #e6eef6;
    --tl-glow: rgba(103, 179, 255, .28);
  }
}

.dates-day {
  position: relative;
  padding-left: clamp(.75rem, 2vw, 1rem);
}

.dates-line-top {
  display: inline-block;
  position: absolute;
  top: 0;
  height: $offset;
  left: calc(#{$offset} - #{$line-w} / 2);
  width: $line-w;
  background: var(--tl-progress);
  border-radius: 2px;
  z-index: 0;
}

.dates-dot {
  display: inline-block;
  position: absolute;
  top: $offset;
  height: $dot-size;
  width:  $dot-size;
  border-radius: 50%;
  left: calc(#{$offset} - #{$dot-size} / 2);
  background: var(--tl-dot);
  box-shadow:
    0 0 0 2px #fff,
    0 0 0 0 var(--tl-glow);
  z-index: 1;
  transition: transform .18s ease, box-shadow .18s ease;

  &.dates-bg-today {
    top: calc(#{$offset} - #{$dot-radius});
    height: $dot-size * 1.5;
    width:  $dot-size * 1.5;
    left: calc(#{$offset} - (#{$dot-size} * 1.5) / 2);
    background: var(--tl-today);
    box-shadow:
      0 0 0 2px #fff,
      0 4px 14px -4px var(--tl-glow);
  }
}

.dates-line-bottom {
  display: inline-block;
  position: absolute;
  top: $offset + $dot-size;
  bottom: 0;
  left: calc(#{$offset} - #{$line-w} / 2);
  width: $line-w;
  background: var(--tl-track-muted);
  border-radius: 2px;
  z-index: 0;
}

.dates-bg-today { background: var(--tl-today); }

.dates-day.is-past {
  .dates-line-top, .dates-line-bottom { background: var(--tl-progress); }
  .dates-dot { background: var(--tl-progress); }
}
.dates-day.is-today {
  .dates-line-top { background: var(--tl-progress); }
  .dates-line-bottom { background: var(--tl-track); }
  .dates-dot { transform: scale(1.05); }
}
.dates-day.is-future {
  .dates-line-top, .dates-line-bottom { background: var(--tl-track); }
  .dates-dot {
    background: #fff;
    box-shadow:
      0 0 0 2px var(--tl-track),
      0 0 0 0 var(--tl-glow);
  }
}

.dates-day:hover .dates-dot:not(.dates-bg-today),
.dates-day:focus-within .dates-dot:not(.dates-bg-today) {
  transform: translateY(-1px) scale(1.06);
  box-shadow:
    0 0 0 2px #fff,
    0 6px 18px -6px var(--tl-glow);
}

.dates-day:focus-within .dates-dot {
  outline: none;
  box-shadow:
    0 0 0 3px rgba(255,255,255,.9),
    0 0 0 6px var(--tl-glow);
}

@media (prefers-reduced-motion: reduce) {
  .dates-dot { transition: none; }
}
